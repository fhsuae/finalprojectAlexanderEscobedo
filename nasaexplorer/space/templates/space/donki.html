{% extends "base.html" %}
{% block title %}DONKI Space Weather{% endblock %}

{% block content %}
<h2 class="mb-4">Recent Solar Flares (DONKI)</h2>

{% if not events %}
    <p>No solar flare data available at this time.</p>
{% else %}
    <div class="table-responsive">
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Class</th>
                    <th>Begin</th>
                    <th>Peak</th>
                    <th>End</th>
                    <th>Source Location</th>
                    <th>Active Region</th>
                    {% if user.is_authenticated %}
                    <th>Favorite</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for e in events %}
                <tr>
                    <td>{{ e.id }}</td>
                    <td>{{ e.class }}</td>
                    <td>{{ e.begin }}</td>
                    <td>{{ e.peak }}</td>
                    <td>{{ e.end }}</td>
                    <td>{{ e.source }}</td>
                    <td>{{ e.active_region }}</td>
                    {% if user.is_authenticated %}
                    <td>
                      <form method="post" action="{% url 'space:add_favorite' %}">
                        {% csrf_token %}
                        <input type="hidden" name="image_id" value="{{ e.id }}" />
                        <input type="hidden" name="image_title" value="Solar Flare {{ e.id }} - {{ e.class }}" />
                        <input type="hidden" name="image_url" value="" />
                        <button type="submit" class="btn btn-sm btn-outline-primary">Add</button>
                      </form>
                    </td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endif %}
{% endblock %}
